apiVersion: '2023-05-01'
name: photo-service
type: Microsoft.ContainerInstance/containerGroups
properties:
  containers:
  - name: photo-server
    properties:
      environmentVariables: []
      image: photostructure/server:alpha
      ports:
      - port: 1787
      resources:
        requests:
          cpu: 1.0
          memoryInGB: 1.0
      volumeMounts:
      - mountPath: /ps/library
        name: pslibrary
      - mountPath: /pictures
        name: data
  osType: Linux
  restartPolicy: Never
  ipAddress:
    ports: 
      - protocol: "TCP"
        port: 1787
    type: "Private"
  subnetIds:
  - "id": "/subscriptions/6b48e377-dbbd-473d-b9d3-f5d53eeb2325/resourceGroups/rg-canadacentral/providers/Microsoft.Network/virtualNetworks/labvnet/subnets/aci"
  volumes:
  - name: pslibrary
    azureFile:
      sharename: "pslibrary"
      storageAccountName: "{storage_account}"
      storageAccountKey: "{storage_key}"
  - name: data
    azureFile:
      sharename: "{file_share}"
      storageAccountName: "{storage_account}"
      storageAccountKey: "{storage_key}"
